# 架构-04-加密算法

[TOC]


## 更新
* 2022/06/06，撰写



## 前言

加密算法可分为
1. 对称加密算法（加密和解密的密钥相同）
2. 非对称加密算法（加密和解密的密钥不同）


* 对称加密算法

| 名称  | 密钥长度 | 运算速度 | 安全性 | 资源消耗 |
|-------|-------|----------|-------|----------|
| DES | 56位 | 较快 | 低 | 中 | 
| 3DES | 112位或168位 |  慢 | 中 | 高 |
| AES | 128、192、256位 | 快 | 高 | 低 |


* 非对称加密算法

| 名称 | 成熟度 | 安全性（取决于密钥长度） | 运算速度 | 资源消耗 |
|------|------|---------------|---------|-----------------|
| RSA | 高 |  高  | 慢 | 高 |
| DSA | 高 | 高  | 慢 | 只能用于数字签名 |
| ECC | 低 | 高 | 快 | 低（计算量小，存储空间占用小，带宽要求低） |



## 散列算法


| 名称 | 安全性  | 速度 | 可逆性 |
|-----|---------|-----|------|
| SHA-1 |  高 | 慢 | 不可逆 |
| MD5 | 中 | 快 | 不可逆 |


### MD5

* [三分钟学习 MD5](https://zhuanlan.zhihu.com/p/26592209)


**MD5（Message Digest Algorithm 5），即「消息摘要算法版本 5」，是一种 Hash 算法，是一种信息摘要算法（MD5 不是加密算法，因为不可逆）。**

MD5 可以将任意长度的原始数据映射成为 128 bit 的数据。这一点跟 CRC 类似，都是把一串数据经过处理，得到另一个固定长度的数据。


> MD5 的特点
1. 不可逆性
   * 根据 MD5 值计算不出原始数据
2. 唯一性 
   * 不同原始数据会有不同的 MD5 值（但是不完全可靠）

>  MD5 算法
1. 第 1 步，数据填充。填充后数据长度为 512 bit 的整数倍。
2. 第 2 步，循环计算。每 512 bit 作为一组，前一个分组得到的 MD5 作为下一个分组的状态输入（看作就是 ABCD 吧，代表 4 个 32 bit）。最终的ABCD 就是 128 bit 的 MD5。

> Hash 碰撞
1. Hash 碰撞是指两份不同的原始数据，得到相同的 MD5 值。
2. MD5 是具有唯一性的，但是这个唯一性是有限的，MD5 是有概率的发生重复的。



### SHA算法

* [SHA算法原理与常用实现 | CSDN](https://blog.csdn.net/java_zhangshuai/article/details/105590847)




SHA 算法（Secure Hash Algorithm），又叫安全散列算法。

SHA 算法是基于 MD4 算法的基础上，演变而来。但 SHA 算法出生好，是美国国家安全局设计的。

SHA 算法，是一个系列家族，包括
1. SHA-1
2. SHA-2（又可划分为下面 4 种）
   * SHA-224
   * SHA-256
   * SHA-384
   * SHA-512


> 长度

JDK 中对 SHA-1、SHA-256、SHA-384、SHA-512 都有实现。
1. SHA-1 的最终密码长度是 160 位。
2. SHA-256 的最终密码长度是 256 位。
3. SHA-384 的最终密码长度是 384 位。
4. SHA-512 的最终密码长度是 512 位。


> 特点

SHA 算法，实际上也是一种消息摘要算法，这个和 MD 算法是类似的。同样的，SHA 算法也具有如下特点
1. 不可逆性
2. 唯一性（不完全可靠，会存在哈希冲突）


> 应用
1. 类似 MD5 的应用场景
2. 比特币
   * 比特币中，挖矿算法其实就是 SHA-256 算法，矿工们根据不断修改随机数，不断的进行 SHA-256 运算
3. HTTPS 签名算法


## Base64

* [base64 介绍](https://www.liaoxuefeng.com/wiki/1016959663602400/1017684507717184)

Base64 是一种用 64 个字符来表示任意二进制数据的方法。

在 Base64 中的可打印字符包括字母 `A-Z`、`a-z`、数字 `0-9`，这样共有 62 个字符，此外两个可打印符号在不同的系统中而不同，普通的（RFC4648 中规定）最后两个字符是 `+` 和 `/`。Base64 常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据。


由于 `2^6 = 64`，所以在 Base64 中，每 6 个比特为一个单元，对应某个可打印字符。3 个字节有 24 个比特，对应于 4 个 Base64 单元，即 3 个字节可由 4 个可打印字符来表示。


所以，Base64 编码会把 3 字节的二进制数据，编码为 4 字节的文本数据，长度增加 33%，好处是编码后的文本数据可以在邮件正文、网页等直接显示。

如果要编码的二进制数据不是 3 的倍数，最后会剩下 1 个或 2 个字节怎么办？Base64 用 `\x00` 字节在末尾补足后，再在编码的末尾加上 1 个或 2 个 `=` 号，表示补了多少字节，解码的时候，会自动去掉。


由于标准的 Base64 编码后可能出现字符 `+` 和 `/`，在 URL 中就不能直接作为参数，所以又有一种 `url safe` 的 Base64 编码，其实就是把字符 `+`和 `/` 分别变成 `-` 和 `_`。

**Base64 是一种通过查表的编码方法，不能用于加密，即使使用自定义的编码表也不行。Base64 是可逆的，经过 encode 后，可以 decode 得到原文。**

Base64 适用于小段内容的编码，比如数字证书签名、Cookie 的内容等。